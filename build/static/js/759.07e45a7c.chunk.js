"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[759,744],{4219:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(9439),s=n(2791),a=n(4165),i=n(5861),o=n(6213),c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6eWxud3Fib2FiZnhpZmpzZXZpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY3NDYzNjI0MiwiZXhwIjoxOTkwMjEyMjQyfQ.9YzPtaUZzqkGKve6PI5MtH_otfv1jh521NugK9dqyis",u="https://kzylnwqboabfxifjsevi.supabase.co";function l(e,t,n){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((0,a.Z)().mark((function e(t,n,r){var s,i,l,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=(0,o.eI)(u,c),r&&t&&n){e.next=3;break}return e.abrupt("return","user and index must be valid for RATING...!!!");case 3:return e.next=5,s.from("Favorite movies").update({rating:r}).eq("user_id",t).eq("movie_id",n);case 5:if(i=e.sent,l=i.data,d=i.error){e.next=13;break}return console.log(l),e.abrupt("return",!0);case 13:return console.log(d.message,"Unable to rate this. who the fuck are you."),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=n(9440),v=n(184),p=function(e){var t=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.userId){t.next=5;break}console.log(e.userId,"user wasnt logged in!@@@"),e.setMustLoginModal(!0),t.next=12;break;case 5:return e.changeGrade(n.target.value),t.next=8,l(e.userId,e.id,parseInt(n.target.value));case 8:r=t.sent,console.log(h.Z,r),(0,h.Z)(e.userId),console.log(n.target.value,r,"STAR");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,v.jsxs)("label",{className:"star",children:[(0,v.jsx)("input",{onClick:t,type:"radio",name:"rating",id:e.grade,value:e.index,className:"stars_radio-input"}),(0,v.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"#fce500",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",style:e.style,children:(0,v.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})]})};var f=function(e){var t=(0,s.useState)(),n=(0,r.Z)(t,2),a=n[0],i=n[1],o=function(e){i(e)},c={fill:"#fce500"};return(0,s.useEffect)((function(){e.rating&&(console.log("set gradeindex now"),i(e.rating))}),[e.rating]),(0,s.useEffect)((function(){console.log(a)}),[a]),(0,v.jsx)("div",{className:"stars",children:["Poor","Fair","Good","Very good","Excellent"].map((function(t,n){return(0,v.jsx)(p,{index:n,style:a>=n?c:{},changeGrade:o,userId:e.userId,id:e.id,saved:e.saved,setMustLoginModal:e.setMustLoginModal},t)}))})}},9759:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var r=n(4165),s=n(5861),a=n(9439),i=n(3263),o=n(2791),c=n(7689),u=(n(4158),n(4219)),l=n(1087),d=n(184);var h=function(e){var t=e.posterUrls,n=e.saveMovie,r=e.unsaveMovie,s=(0,o.useState)(1),i=(0,a.Z)(s,2),c=i[0],u=i[1],h=function(e){c+e>t.length?u(1):u(c+e<=0?t.length:c+e)};return(0,d.jsxs)("div",{id:"carouselExampleCrossfade",className:"carousel",children:[(0,d.jsx)("div",{id:"unsaved",onClick:function(){return n()}},"unsaved"),(0,d.jsx)("div",{id:"saved",onClick:function(){return r()}},"saved"),(0,d.jsx)("div",{className:"carousel-item active",children:(0,d.jsx)("img",{src:t[c-1],className:"d-block w-100 h-100 hover-shadow",alt:c})}),(0,d.jsxs)("div",{id:"posterCounter",children:[(0,d.jsxs)("h1",{children:[c,"/",t.length]}),(0,d.jsxs)("div",{className:"w-2/4 flex justify-between",children:[(0,d.jsx)(l.rU,{id:"movieToFavorites",to:"/favorites",children:"Watchlist"}),(0,d.jsx)(l.rU,{id:"movieToHome",to:"/",children:"Go back to home"})]})]}),(0,d.jsx)("button",{className:"carousel-control-prev",type:"button",onClick:function(){return h(-1)}}),(0,d.jsxs)("button",{className:"carousel-control-next",type:"button",onClick:function(){return h(1)},children:[(0,d.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),(0,d.jsx)("span",{className:"visually-hidden",children:"Next"})]})]})},v=n(9440);var p=function(){var e=(0,c.TH)(),t=(0,o.useState)(e.state.id),l=(0,a.Z)(t,2),p=l[0],f=l[1];(0,o.useEffect)((function(){if(/^tt[0-9]{6,9}$/gi.test(e.state.id))we(p);else{var t=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=c4aa72a3b011582e85cbcc03fe277717&language=en-US")).then((function(e){var t=e.data.imdb_id;f(t),console.log(t),we(t)})).catch((function(e){console.log(e,"its for regexx")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();console.log("id not goood",p),t(e.state.id)}}),[]);var x=localStorage.getItem("userId"),m=(0,o.useState)([]),g=(0,a.Z)(m,2),j=g[0],Z=g[1],b=(0,o.useState)(""),y=(0,a.Z)(b,2),w=y[0],I=y[1],k=(0,o.useState)(""),S=(0,a.Z)(k,2),N=S[0],M=S[1],F=(0,o.useState)(""),_=(0,a.Z)(F,2),q=_[0],D=_[1],z=(0,o.useState)(""),C=(0,a.Z)(z,2),R=C[0],J=C[1],G=(0,o.useState)(""),T=(0,a.Z)(G,2),U=T[0],O=T[1],Y=(0,o.useState)(),P=(0,a.Z)(Y,2),X=P[0],E=P[1],A=(0,o.useState)(),W=(0,a.Z)(A,2),L=W[0],B=W[1],H=(0,o.useState)(""),K=(0,a.Z)(H,2),V=K[0],Q=K[1],$=(0,o.useState)(""),ee=(0,a.Z)($,2),te=ee[0],ne=ee[1],re=(0,o.useState)(""),se=(0,a.Z)(re,2),ae=se[0],ie=se[1],oe=(0,o.useState)(""),ce=(0,a.Z)(oe,2),ue=ce[0],le=ce[1],de=(0,o.useState)(0),he=(0,a.Z)(de,2),ve=he[0],pe=he[1],fe=(0,o.useState)(0),xe=(0,a.Z)(fe,2),me=xe[0],ge=xe[1],je=(0,o.useState)(!1),Ze=(0,a.Z)(je,2),be=Ze[0],ye=Ze[1],we=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"GET",url:"https://movie-database-alternative.p.rapidapi.com/",params:{r:"json",i:t},headers:{"X-RapidAPI-Key":"676d565cf9msh03913601fbc68d3p181769jsnc91829350ae4","X-RapidAPI-Host":"movie-database-alternative.p.rapidapi.com"}},e.next=3,i.Z.request(n).then((function(e){var n;console.log(e.data,t,"movie details were fetched..."),e.data||console.warn("no movie found -> ",e.data),n=e.data,Z([n.Poster]),I(n.Title),M(n.Released),D(n.Rated),J(n.Genre),O(n.Plot),E(n.Runtime),B(n.imdbRating),Q(n.Actors),le(n.Awards),ne(n.Director),ie(n.Writer),pe(n.BoxOffice)})).catch((function(e){console.error(e,p)}));case 3:return e.next=5,i.Z.get("https://api.themoviedb.org/3/movie/".concat(p,"/images?api_key=c4aa72a3b011582e85cbcc03fe277717&language=en-US&include_image_language=en")).then((function(e){Z([]),console.log(e.data.posters);for(var t=e.data.posters,n=[],r=0;r<t.length;r++){var s=t[r].file_path;n.push("https://image.tmdb.org/t/p/original".concat(s))}Z(n)})).catch((function(e){console.log("problem with poster",e)}));case 5:Ie(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse(localStorage.getItem("ratings")),s=document.querySelector("#saved"),a=document.querySelector("#unsaved"),Object.keys(n).forEach((function(e){e===t&&(console.log(n,t,"this movie is saved"),localStorage.setItem(t,!0),a.style.display="none",s.style.display="block",n[e]&&(ge(n[e]),ye(!0),console.log(n[e],"saveds[x]")))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=3;break}return alert("You must login to use this feature..."),e.abrupt("return",!1);case 3:console.log("saved this movie",p,"user",x),t=document.querySelector("#saved"),a=document.querySelector("#unsaved"),localStorage.setItem(p,!0),n.e(68).then(n.bind(n,5068)).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.SupabaseSaveMovie(x,p);case 2:if(!e.sent){e.next=12;break}return localStorage.setItem(p,!0),a.style.display="none",t.style.display="block",e.next=9,(0,v.Z)(x);case 9:e.sent,e.next=13;break;case 12:alert("".concat(p," this movie was already saved...!"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.e(843).then(n.bind(n,6843)).then(function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.SupabaseUnsaveMovie(x,p);case 2:if(!(n=e.sent)){e.next=12;break}return localStorage.setItem(p,!1),s=document.querySelector("#saved"),document.querySelector("#unsaved").style.display="block",s.style.display="none",e.next=11,(0,v.Z)(x);case 11:e.sent;case 12:console.log(n);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)("div",{id:"movieCont",children:[(0,d.jsx)("div",{id:"moviePoster",children:(0,d.jsx)(h,{posterUrls:j,saveMovie:ke,unsaveMovie:Se})}),(0,d.jsx)("div",{id:"movieDetails",children:(0,d.jsxs)("div",{id:"movieDetail",children:[(0,d.jsxs)("div",{id:"movieTitles",children:[(0,d.jsx)("a",{href:"https://www.imdb.com/title/".concat(p),target:"_",id:"movieImdb",children:L}),(0,d.jsxs)("div",{id:"movieTitle",children:[w,(0,d.jsxs)("div",{id:"movieRating",children:[(0,d.jsx)("h1",{children:q})," |",(0,d.jsx)("h1",{children:X})," |",(0,d.jsx)("h1",{children:N})]})]})]}),(0,d.jsxs)("div",{id:"movieDetailes",children:[(0,d.jsx)("div",{className:"movieFlexDiv plot",children:U}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Directed by: ",(0,d.jsx)("span",{children:te})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Written by: ",(0,d.jsx)("span",{children:ae})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Rated: ",(0,d.jsx)("span",{children:q})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Running time: ",(0,d.jsx)("span",{children:X})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Release date: ",(0,d.jsx)("span",{children:N})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Gross Box Office: ",(0,d.jsx)("span",{children:ve})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Awards and Nominations: ",(0,d.jsx)("span",{children:ue})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Genre: ",(0,d.jsx)("span",{children:R})]})}),(0,d.jsx)("div",{className:"movieFlexDiv",children:(0,d.jsxs)("h1",{children:["Actors: ",(0,d.jsx)("span",{children:V})]})}),(0,d.jsxs)("div",{className:"flex h-1/6 items-center w-full px-2",id:"movieRatingStars",children:[(0,d.jsx)("h1",{children:"Rate this movie : "}),(0,d.jsx)(u.Z,{userId:x,saved:be,id:p,rating:me})]})]}),(0,d.jsxs)("div",{id:"links",children:[(0,d.jsx)("a",{id:"trailer",href:"https://www.youtube.com/results?search_query=".concat(w),target:"_",children:(0,d.jsx)("h1",{children:"Watch trailer"})}),(0,d.jsx)("a",{id:"watchLink",href:"https://www1.123movies.co/search/?s=".concat(w?w.replace(" ","+"):""),target:"_",children:(0,d.jsx)("h1",{children:"Watch here"})})]})]})})]})}},9440:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(4165),s=n(5861),a=n(7744);function i(e){return o.apply(this,arguments)}function o(){return(o=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.SupabaseFavorite)(t);case 2:(n=e.sent)&&localStorage.setItem("ratings",JSON.stringify(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7744:function(e,t,n){n.r(t),n.d(t,{SupabaseFavorite:function(){return c}});var r=n(4165),s=n(5861),a=n(6213),i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6eWxud3Fib2FiZnhpZmpzZXZpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY3NDYzNjI0MiwiZXhwIjoxOTkwMjEyMjQyfQ.9YzPtaUZzqkGKve6PI5MtH_otfv1jh521NugK9dqyis",o="https://kzylnwqboabfxifjsevi.supabase.co";function c(e){return u.apply(this,arguments)}function u(){return(u=(0,s.Z)((0,r.Z)().mark((function e(t){var n,s,c,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,a.eI)(o,i),t){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,n.from("Favorite movies").select("movie_id,rating").eq("user_id",t);case 5:if(s=e.sent,c=s.data,u=s.error){e.next=19;break}if(0!==c.length){e.next=13;break}return e.abrupt("return",!1);case 13:return l={},c.map((function(e){l[e.movie_id]=e.rating})),console.log(l),e.abrupt("return",l);case 17:e.next=21;break;case 19:return console.log(u,"cant get user favorites"),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=759.07e45a7c.chunk.js.map