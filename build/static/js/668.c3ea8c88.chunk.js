"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[668],{5668:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var s=n(4165),i=n(5861),r=n(9439),o=n(3263),a=n(2791),c=n(1087),u=n(6213),l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6eWxud3Fib2FiZnhpZmpzZXZpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY3NDYzNjI0MiwiZXhwIjoxOTkwMjEyMjQyfQ.9YzPtaUZzqkGKve6PI5MtH_otfv1jh521NugK9dqyis",d="https://kzylnwqboabfxifjsevi.supabase.co";function m(e){return h.apply(this,arguments)}function h(){return h=(0,i.Z)((0,s.Z)().mark((function e(t){var n,i,r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,u.eI)(d,l),t){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,n.from("memes").select("*").eq("user_id",t);case 5:if(i=e.sent,r=i.data,i.error){e.next=11;break}return console.log(r),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt6eWxud3Fib2FiZnhpZmpzZXZpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY3NDYzNjI0MiwiZXhwIjoxOTkwMjEyMjQyfQ.9YzPtaUZzqkGKve6PI5MtH_otfv1jh521NugK9dqyis",p="https://kzylnwqboabfxifjsevi.supabase.co";function v(e,t){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)((0,s.Z)().mark((function e(t,n){var i,r,o,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(0,u.eI)(p,f),n&&t){e.next=3;break}return e.abrupt("return","link and id must be valid...!!!");case 3:return e.next=5,i.from("memes").insert([{user_id:t,link:n}]);case 5:if(r=e.sent,o=r.data,a=r.error){e.next=13;break}return console.log(o,"Successfully saved this meme..."),e.abrupt("return",!0);case 13:return console.log(a.message,"Unable to save this meme. It might already exist."),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(7948),y=n.n(g),b=n(184);var I={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"},container:{width:"100%",height:"fit-content",position:"relative"},imageDiv:{width:"100%",height:"fit-content",position:"relative"},image:{width:"100%",height:"28rem"},date:{width:"100%",height:"2rem",backgroundColor:"white"}},Z=function(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],u=t[1],l=(0,a.useState)([]),d=(0,r.Z)(l,2),h=d[0],f=d[1],p=(0,a.useState)(1),x=(0,r.Z)(p,2),g=x[0],Z=x[1],k=(0,a.useState)(h[g]),j=(0,r.Z)(k,2),C=j[0],w=j[1],S=(0,a.useState)([]),M=(0,r.Z)(S,2),N=M[0],z=M[1],L=localStorage.getItem("userId"),O=(0,a.useState)(!1),E=(0,r.Z)(O,2),J=E[0],U=E[1];(0,a.useEffect)((function(){L?console.log(L,"user has signed in"):console.log(L,"user has not signed in!!!"),m(L),B()}),[L]);var B=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.get("https://movie-backend-8isc.onrender.com/api/v1/memes").then((function(e){var t=e.data.category,n=[];return t.forEach((function(e){n.push(e.image)})),f(h.concat(n)),console.log("RESPONSE IRSEN SHUUUUU!!!!",n),n})).catch((function(e){console.log("\u0413\u0430\u0440\u0441\u0430\u043d \u0430\u043b\u0434\u0430\u0430______",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){0!==g&&g===h.length?B():w(h[g]),console.log(h)}),[g,h]);var T=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(t){var n,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=3;break}return U(!0),e.abrupt("return",!1);case 3:return n=document.getElementById("memeSaved"),e.next=6,v(L,t);case 6:i=e.sent,console.log(i),i?(n.style.display="flex",setTimeout((function(){n.style.display="none"}),2e3)):(n.style.display="flex",n.style.backgroundColor="#dc143c90",n.innerHTML="This meme can not be saved...",setTimeout((function(){n.style.display="none",n.style.backgroundColor="#86fba590",n.innerHTML="Successfully saved this meme..."}),2e3));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var t,n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=3;break}return U(!0),e.abrupt("return",!1);case 3:return u(!0),e.next=6,m(L);case 6:t=e.sent,n=[],t.map((function(e){return n.push([e.created_at.slice(0,19),e.link]),!0})),z(n),console.log(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{id:"contMemes",children:[(0,b.jsxs)("div",{id:"memes",children:[(0,b.jsxs)("div",{id:"meme",children:[(0,b.jsx)("img",{draggable:!1,src:C,alt:""}),(0,b.jsx)("div",{id:"memeSaved",children:"Successfully saved this meme..."})]}),(0,b.jsxs)("div",{id:"memeButtons",children:[(0,b.jsxs)("div",{id:"topButtons",children:[(0,b.jsx)(c.rU,{to:"/",id:"memeLink",class:"buttonClass",children:"Go Back to Home"}),(0,b.jsx)("button",{class:"buttonClass",onClick:function(){return Y()},children:"Saved memes"}),(0,b.jsx)("button",{class:"buttonClass",onClick:function(){return T(C)},children:"Save..."})]}),(0,b.jsxs)("div",{id:"changeMeme",children:[(0,b.jsx)("button",{class:"buttonClass2",onClick:function(){Z(g-1);var e=document.getElementById("memeSaved");e.style.display="none",e.style.backgroundColor="#86fba590",e.innerHTML="Successfully saved this meme..."},children:"Last"}),(0,b.jsx)("button",{class:"buttonClass2",onClick:function(){Z(g+1);var e=document.getElementById("memeSaved");e.style.display="none",e.style.backgroundColor="#86fba590",e.innerHTML="Successfully saved this meme..."},children:"Next"})]})]})]}),(0,b.jsx)(y(),{id:"modal",style:I,isOpen:n,onRequestClose:function(){return u(!1)},contentLabel:"Example Modal",ariaHideApp:!1,shouldCloseOnOverlayClick:!0,children:(0,b.jsxs)("div",{style:I.container,children:[(0,b.jsx)("div",{id:"exitIcon",onClick:function(){return u(!1)}}),(0,b.jsx)("h1",{id:"exitModal",children:"these are memes that was found on the side of the road."}),(0,b.jsx)("div",{id:"grid",children:N.map((function(e){return(0,b.jsxs)("div",{style:I.imageDiv,children:[(0,b.jsx)("img",{style:I.image,src:e[1],alt:e[0]},e[0]),(0,b.jsxs)("h1",{style:I.date,children:["Saved at: ",e[0]]})]})}))})]})}),(0,b.jsx)(y(),{id:"mustLoginModal",isOpen:J,onRequestClose:function(){return U(!1)},ariaHideApp:!1,shouldCloseOnOverlayClick:!0,children:(0,b.jsxs)("div",{id:"mustLoginCont",children:[(0,b.jsx)("h4",{className:"py-2 text-xl font-extrabold",children:"You must login to use this feature!"}),(0,b.jsxs)("div",{id:"mustLoginButtons",children:[(0,b.jsx)(c.rU,{id:"mustLoginButton",onClick:function(){U(!1)},className:"bg-green-500",to:"/",children:"Login Now"}),(0,b.jsx)("input",{id:"mustLoginButton",type:"button",value:"Close",onClick:function(){return U(!1)},className:"bg-red-600"})]})]})})]})}}}]);
//# sourceMappingURL=668.c3ea8c88.chunk.js.map